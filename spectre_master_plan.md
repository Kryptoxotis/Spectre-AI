Master Architecture & Execution Plan for the Spectre AI AssistantnnğŸ§  OverviewnSpectre is a personal AI assistantâ€”your virtual CTO, developer, and plannerâ€”designed to autonomously build websites and automation workflows by asking questions, creating detailed step-by-step plans, executing them, and learning from every project.nnIt operates like a "second brain" and should behave like a junior engineer that improves over time, always verifying each step against the master plan.nnğŸš© Core PrinciplesnPlan First, Act LaternSpectre must generate a full execution plan before writing code. Every code step must refer back to the current plan.nnExecution Must Follow PlannEach code action must return to the plan to determine the next action. No guessing or hallucinating.nnStrict Permission RulesnnCan modify project filesnnCannot modify its own codebase without explicit approvalnnCannot delete anything unless explicitly approvednnAny learning from third-party projects must request permissionnnResilient ArchitecturenSpectre must run even if an MCP server fails. It should:nnSuggest fixesnnRecommend connecting ChatGPT or Claude to help debugnnNever crash due to external service failurennModular & ExpandablennSpectre must support adding new agents or logic without refactoring its foundationnnAgent behaviors should be easily swappable or upgradablennLog EverythingnnEvery action, error, retry, or decision must be loggednnLogs must be structured for review by external LLMs (e.g., Claude, GPT-4)nnğŸ“¦ Project Structure (Node.js / TypeScript Best Practices)npgsqlnCopynEditnspectre/nâ”œâ”€â”€ src/nâ”‚   â”œâ”€â”€ core/                    # Main orchestration logicnâ”‚   â”‚   â”œâ”€â”€ orchestrator.tsnâ”‚   â”‚   â”œâ”€â”€ logger.tsnâ”‚   â”‚   â””â”€â”€ config.tsnâ”‚   â”œâ”€â”€ agents/                  # Core agents for operationnâ”‚   â”‚   â”œâ”€â”€ questioner.tsnâ”‚   â”‚   â”œâ”€â”€ planner.tsnâ”‚   â”‚   â”œâ”€â”€ executor.tsnâ”‚   â”‚   â”œâ”€â”€ reviewer.tsnâ”‚   â”‚   â””â”€â”€ validator.tsnâ”‚   â”œâ”€â”€ integrations/nâ”‚   â”‚   â”œâ”€â”€ mcp/nâ”‚   â”‚   â”‚   â”œâ”€â”€ github-client.tsnâ”‚   â”‚   â”‚   â”œâ”€â”€ notion-client.tsnâ”‚   â”‚   â”‚   â”œâ”€â”€ supabase-client.tsnâ”‚   â”‚   â”‚   â””â”€â”€ mcp-handler.tsnâ”‚   â”‚   â””â”€â”€ deployment-handler.tsnâ”‚   â”œâ”€â”€ learning/nâ”‚   â”‚   â”œâ”€â”€ chroma.tsnâ”‚   â”‚   â”œâ”€â”€ memory.tsnâ”‚   â”‚   â”œâ”€â”€ pattern-engine.tsnâ”‚   â”‚   â””â”€â”€ failure-analysis.tsnâ”‚   â”œâ”€â”€ web/nâ”‚   â”‚   â”œâ”€â”€ routes/nâ”‚   â”‚   â”‚   â”œâ”€â”€ chat.tsnâ”‚â”‚   â”‚   â”‚   â”œâ”€â”€ logs.tsnâ”‚   â”‚   â”‚   â””â”€â”€ dashboard.tsnâ”‚   â”‚   â””â”€â”€ ui/nâ”‚   â”‚       â”œâ”€â”€ views/nâ”‚   â”‚       â””â”€â”€ static/nâ”‚   â””â”€â”€ utils/nâ”‚       â”œâ”€â”€ rate-limiter.tsnâ”‚       â”œâ”€â”€ helpers.tsnâ”‚       â””â”€â”€ types.tsnâ”œâ”€â”€ README.mdnâ”œâ”€â”€ .env.examplenâ”œâ”€â”€ package.jsonnâ””â”€â”€ tsconfig.jsonnğŸ§© Agent DefinitionsnEach agent performs a specific function. Spectre should always be capable of adding more agents as needed.nnAgenttPurposenquestionertAsks context-relevant questions using learned patternsnplannertBreaks tasks into detailed steps; updates plan as needednexecutortRuns code generation and deployment logicnreviewertReviews generated code against requirementsnvalidatortConfirms project is complete and functioningnloggertWrites structured logs for all steps and retriesnnğŸ—‚ Execution Tracks (Checklist-Based Structure)nExecution is organized around tracks, not "phases." Each track includes granular checklists.nnğŸ“‹ Track: Planning & Questioningn Identify type: website or automationnn Ask required questions (min. 10, reduce over time)nn Store answers in memorynn Generate full step-by-step execution plannn Present plan for approvalnn Wait for confirmation before proceedingnnğŸ§  Track: Learning & Memoryn Store entire interaction history to ChromaDBnn Analyze:nnWhat questions were useful?nnWhat steps worked or failed?nn Update:nnQuestion patternsnnPlanning templatesnnRetry logicnn Log learnings for third-party AI (Claude/GPT) to reviewnnâš™ï¸ Track: Project ExecutionnFor Websites:nn Generate GitHub repo with scoped namenn Push starter filesnn Use Notion or Supabase for CMS structurenn Create default admin dashboard (if type === website)nn Link CRUD logic between CMS and frontendnnFor Automations:nn Use n8n-client.ts to build workflowsnn Create visual workflows based on user goalsnn Offer downloadable JSON export or direct n8n uploadnnğŸ›°ï¸ Track: Integration Layern MCP GitHub clientnn Authenticate using .envnn Allow repo create, push, branch, commitnn MCP Notion clientnn Read/write to databasesnn MCP Supabase (optional fallback)nn Handle MCP errors with:nnRetrynnSuggest fix via lognnNEVER crash on failurennğŸš€ Track: Deploymentn Validate GitHub pushnn Trigger Vercel deploymentnn Log deployment resultnn On failure:nnLog failure reasonnnSuggest rollbacknnSuggest using Claude/GPT for fixnnğŸ” Track: Safety & Permissionsn Log every file modifiednn Track API usage to avoid overusenn Ask for permission if:nnModifying own codennDeleting anythingnnUsing new third-party project as learning datannğŸ”„ Track: Self-Improvementn After each project:nnCompare plan vs actualnnStore successes and failuresnn Suggest improvements to:nnPlanning logicnnQuestioning logicnnRetry patternsnn Request permission before:nnModifying core agent logicnnUpdating internal heuristicsnnğŸ§ª Checklist: Getting StartednClone spectre repo locallynnRun setup:nnbashnCopynEditnnpm installncp .env.example .envnAdd credentials:nnClaude APInnGitHub TokennnNotion or Supabase APInnVercel Token (optional)nnStart dev server:nnbashnCopynEditnnpm run devnOpen browser interfacennStart a new projectnnğŸ“œ Guidelines for Cursornâœ… Do not guess or hallucinate missing stepsnnâœ… Do not create side features not listednnâœ… Always refer back to the checklistnnâœ… After each step: check status, then resume plannnâœ… Follow structured logging formatnnâœ… Use the orchestrator to coordinate agents in ordernnğŸ“š Notes for Future ExpansionsnFuture capabilities (e.g. voice, outreach, mobile) will be added later. Spectre should be written so they can be injected modularly without breaking existing functionality.nnğŸ§¾ Example Log Structure (LLM Parse-Ready)njsonnCopynEditn{n  "timestamp": "2025-07-18T21:03:00Z",n  "agent": "planner",n  "action": "generated execution plan",n  "project_type": "website",n  "status": "success",n  "notes": "10 questions asked. Plan stored in memory.",n  "next_step": "awaiting user approval"n}nâœ… Success CriterianGoaltMetricnâœ… Plan generatedtAt least 5 steps with questions askednâœ… Project builttWebsite or automation created and deployednâœ… Logs createdtComplete logs with retry trackingnâœ… Learning updatedtChroma + SQLite updated with session datanâœ… No drifttPlan matched execution 100%nâœ… Cursor safetNo infinite loops, hallucinations, or crashes