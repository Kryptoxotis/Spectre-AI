Master Architecture & Execution Plan for the Spectre AI Assistantnn🧠 OverviewnSpectre is a personal AI assistant—your virtual CTO, developer, and planner—designed to autonomously build websites and automation workflows by asking questions, creating detailed step-by-step plans, executing them, and learning from every project.nnIt operates like a "second brain" and should behave like a junior engineer that improves over time, always verifying each step against the master plan.nn🚩 Core PrinciplesnPlan First, Act LaternSpectre must generate a full execution plan before writing code. Every code step must refer back to the current plan.nnExecution Must Follow PlannEach code action must return to the plan to determine the next action. No guessing or hallucinating.nnStrict Permission RulesnnCan modify project filesnnCannot modify its own codebase without explicit approvalnnCannot delete anything unless explicitly approvednnAny learning from third-party projects must request permissionnnResilient ArchitecturenSpectre must run even if an MCP server fails. It should:nnSuggest fixesnnRecommend connecting ChatGPT or Claude to help debugnnNever crash due to external service failurennModular & ExpandablennSpectre must support adding new agents or logic without refactoring its foundationnnAgent behaviors should be easily swappable or upgradablennLog EverythingnnEvery action, error, retry, or decision must be loggednnLogs must be structured for review by external LLMs (e.g., Claude, GPT-4)nn📦 Project Structure (Node.js / TypeScript Best Practices)npgsqlnCopynEditnspectre/n├── src/n│   ├── core/                    # Main orchestration logicn│   │   ├── orchestrator.tsn│   │   ├── logger.tsn│   │   └── config.tsn│   ├── agents/                  # Core agents for operationn│   │   ├── questioner.tsn│   │   ├── planner.tsn│   │   ├── executor.tsn│   │   ├── reviewer.tsn│   │   └── validator.tsn│   ├── integrations/n│   │   ├── mcp/n│   │   │   ├── github-client.tsn│   │   │   ├── notion-client.tsn│   │   │   ├── supabase-client.tsn│   │   │   └── mcp-handler.tsn│   │   └── deployment-handler.tsn│   ├── learning/n│   │   ├── chroma.tsn│   │   ├── memory.tsn│   │   ├── pattern-engine.tsn│   │   └── failure-analysis.tsn│   ├── web/n│   │   ├── routes/n│   │   │   ├── chat.tsn││   │   │   ├── logs.tsn│   │   │   └── dashboard.tsn│   │   └── ui/n│   │       ├── views/n│   │       └── static/n│   └── utils/n│       ├── rate-limiter.tsn│       ├── helpers.tsn│       └── types.tsn├── README.mdn├── .env.examplen├── package.jsonn└── tsconfig.jsonn🧩 Agent DefinitionsnEach agent performs a specific function. Spectre should always be capable of adding more agents as needed.nnAgenttPurposenquestionertAsks context-relevant questions using learned patternsnplannertBreaks tasks into detailed steps; updates plan as needednexecutortRuns code generation and deployment logicnreviewertReviews generated code against requirementsnvalidatortConfirms project is complete and functioningnloggertWrites structured logs for all steps and retriesnn🗂 Execution Tracks (Checklist-Based Structure)nExecution is organized around tracks, not "phases." Each track includes granular checklists.nn📋 Track: Planning & Questioningn Identify type: website or automationnn Ask required questions (min. 10, reduce over time)nn Store answers in memorynn Generate full step-by-step execution plannn Present plan for approvalnn Wait for confirmation before proceedingnn🧠 Track: Learning & Memoryn Store entire interaction history to ChromaDBnn Analyze:nnWhat questions were useful?nnWhat steps worked or failed?nn Update:nnQuestion patternsnnPlanning templatesnnRetry logicnn Log learnings for third-party AI (Claude/GPT) to reviewnn⚙️ Track: Project ExecutionnFor Websites:nn Generate GitHub repo with scoped namenn Push starter filesnn Use Notion or Supabase for CMS structurenn Create default admin dashboard (if type === website)nn Link CRUD logic between CMS and frontendnnFor Automations:nn Use n8n-client.ts to build workflowsnn Create visual workflows based on user goalsnn Offer downloadable JSON export or direct n8n uploadnn🛰️ Track: Integration Layern MCP GitHub clientnn Authenticate using .envnn Allow repo create, push, branch, commitnn MCP Notion clientnn Read/write to databasesnn MCP Supabase (optional fallback)nn Handle MCP errors with:nnRetrynnSuggest fix via lognnNEVER crash on failurenn🚀 Track: Deploymentn Validate GitHub pushnn Trigger Vercel deploymentnn Log deployment resultnn On failure:nnLog failure reasonnnSuggest rollbacknnSuggest using Claude/GPT for fixnn🔐 Track: Safety & Permissionsn Log every file modifiednn Track API usage to avoid overusenn Ask for permission if:nnModifying own codennDeleting anythingnnUsing new third-party project as learning datann🔄 Track: Self-Improvementn After each project:nnCompare plan vs actualnnStore successes and failuresnn Suggest improvements to:nnPlanning logicnnQuestioning logicnnRetry patternsnn Request permission before:nnModifying core agent logicnnUpdating internal heuristicsnn🧪 Checklist: Getting StartednClone spectre repo locallynnRun setup:nnbashnCopynEditnnpm installncp .env.example .envnAdd credentials:nnClaude APInnGitHub TokennnNotion or Supabase APInnVercel Token (optional)nnStart dev server:nnbashnCopynEditnnpm run devnOpen browser interfacennStart a new projectnn📜 Guidelines for Cursorn✅ Do not guess or hallucinate missing stepsnn✅ Do not create side features not listednn✅ Always refer back to the checklistnn✅ After each step: check status, then resume plannn✅ Follow structured logging formatnn✅ Use the orchestrator to coordinate agents in ordernn📚 Notes for Future ExpansionsnFuture capabilities (e.g. voice, outreach, mobile) will be added later. Spectre should be written so they can be injected modularly without breaking existing functionality.nn🧾 Example Log Structure (LLM Parse-Ready)njsonnCopynEditn{n  "timestamp": "2025-07-18T21:03:00Z",n  "agent": "planner",n  "action": "generated execution plan",n  "project_type": "website",n  "status": "success",n  "notes": "10 questions asked. Plan stored in memory.",n  "next_step": "awaiting user approval"n}n✅ Success CriterianGoaltMetricn✅ Plan generatedtAt least 5 steps with questions askedn✅ Project builttWebsite or automation created and deployedn✅ Logs createdtComplete logs with retry trackingn✅ Learning updatedtChroma + SQLite updated with session datan✅ No drifttPlan matched execution 100%n✅ Cursor safetNo infinite loops, hallucinations, or crashes